select * from s;
insert into s values(100,'ram',45);
insert into s values(101,'tim',85);
insert into s values(102,'bala',95);
insert into s values(105,'balu',55);
insert into s values(106,'babu',55);
COMMIT;

CREATE OR REPLACE PROCEDURE S_SP AS
V_NAME S.ST_NAME%TYPE;
BEGIN
--UPDATE S SET ST_NAME='ashwini'
  --  WHERE MARKS=55;
--INSERT INTO S VALUES(107,'KAVI',986);
SELECT ST_NAME INTO V_NAME
FROM S WHERE MARKS=95;
IF SQL%FOUND THEN
    DBMS_OUTPUT.PUT_LINE('UPDATED');
    DBMS_OUTPUT.PUT_LINE(SQL%ROWCOUNT);
ELSIF SQL%NOTFOUND THEN
    DBMS_OUTPUT.PUT_LINE('NOT UPDATED');
END IF;
END;

EXEC S_SP;

SET SERVEROUTPUT ON

--SELECT IN CURSOR
CREATE OR REPLACE PROCEDURE S1_SP AS
--V_NAME S.ST_NAME%TYPE;
CNT NUMBER(2);
CURSOR EMPC IS SELECT ST_ID,ST_NAME,MARKS
                        FROM S;
BEGIN
FOR I IN EMPC LOOP
SELECT COUNT(*) INTO CNT
FROM S
WHERE MARKS=55;
END LOOP;
DBMS_OUTPUT.PUT_LINE(SQL%ROWCOUNT);
END;

EXEC S1_SP;

---------------------
CREATE OR REPLACE PROCEDURE S_SSP AS
cursor CC IS SELECT ST_NAME FROM S;
C NUMBER(2);
BEGIN
FOR I IN CC LOOP
SELECT COUNT(*) INTO C
FROM S
WHERE MARKS=55;
--OPEN CC;
--FETCH CC INTO V_NAME;
--EXIT WHEN CC%NOTFOUND;
DBMS_OUTPUT.PUT_LINE(C);
END LOOP;
DBMS_OUTPUT.PUT_LINE('NO'||CC%ROWCOUNT);
END;

EXEC S_SSP;

CREATE OR REPLACE PROCEDURE SP_CS AS
CURSOR CUS_SALE IS SELECT CUST_NAME,COUNT(SAL_ID)NO_OF_SALES
                    FROM CUS C,SALES S
                    WHERE C.CUST_BKEY=S.CUST_BKEY
                    GROUP BY CUST_NAME;
BEGIN
FOR I IN CUS_SALE LOOP
DBMS_OUTPUT.PUT_LINE(I.CUST_NAME||'  '||I.NO_OF_SALES);
END LOOP;
END;

EXEC SP_CS;

SELECT * FROM CUS;

EXEC S_SP;
